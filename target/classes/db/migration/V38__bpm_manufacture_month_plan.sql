delete from bpm_manufacture_plan_item;
delete from bpm_manufacture_building_plan;
delete from bpm_manufacture_plan;

-- rename bpm_manufacture_plan to bpm_manufacture_month_plan
alter sequence bpm_manufacture_plan_id_sequence rename to bpm_manufacture_month_plan_id_sequence;
alter table bpm_manufacture_plan rename to bpm_manufacture_month_plan;

-- rename bpm_manufacture_building_plan to bpm_manufacture_month_plan_for_building_plan
alter sequence bpm_manufacture_building_plan_id_sequence rename to bpm_manufacture_month_plan_for_building_plan_id_sequence;
alter table bpm_manufacture_building_plan rename to bpm_manufacture_month_plan_for_building_plan;
alter table bpm_manufacture_month_plan_for_building_plan
    drop column bpm_manufacture_plan_id,
    add column bpm_manufacture_month_plan_id integer not null references bpm_manufacture_month_plan on delete restrict;

-- rename bpm_manufacture_plan_item to bpm_manufacture_month_plan_item
alter sequence bpm_manufacture_plan_item_id_sequence rename to bpm_manufacture_month_plan_item_id_sequence;
alter table bpm_manufacture_plan_item rename to bpm_manufacture_month_plan_item;
alter table bpm_manufacture_month_plan_item
    drop column bpm_manufacture_plan_id,
    add column bpm_manufacture_month_plan_id integer not null references bpm_manufacture_month_plan on delete restrict;
